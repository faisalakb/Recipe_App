<!DOCTYPE html>
<html>
  <head>
    <title>RecipeApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "nav", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "modal", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "missing-food", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "register", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= javascript_include_tag 'rails-ujs' %>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>
    <%= yield %>

    <nav class="nav-container">
      <ul>
        <li><a href="/" data-turbolinks-track="true">Foods</a></li>
        <li><a href="/recipes" data-turbolinks-track="true">Recipes</a></li>
        <li><a href="/inventories" data-turbolinks-track="true">Inventories</a></li>
        <li><a href="/missing_foods" data-turbolinks-track="true">Shopping List</a></li>
      </ul>
    </nav>
    
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>

  <script>
  $(document).ready(function() {
    $(".sortable").click(function() {
      var table = $(this).closest("table");
      var rows = table.find("tbody > tr").get();

      var ascending = $(this).hasClass("asc");
      $(this).toggleClass("asc desc");

      rows.sort(function(a, b) {
        var aValue = $(a).find("td:first").text();
        var bValue = $(b).find("td:first").text();
        return ascending ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);
      });

      table.children("tbody").empty().append(rows);
    });
    // Set default sort class
    $(".sortable").first().addClass("asc");
  });
</script>
  </body>
</html>
